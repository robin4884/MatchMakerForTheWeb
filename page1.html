<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Friendship Compatibility Quiz</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    h1, h2, p {
        text-align: center;
    }

    button {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    button:hover {
        background-color: #0056b3;
    }

    input[type="number"] {
        width: 50px;
        padding: 5px;
        margin-right: 5px;
        text-align: center;
    }

    .error {
        color: red;
        text-align: center;
    }
</style>
</head>
<body>
<div class="container">
    <h1>Friendship Compatibility Quiz</h1>
    <div id="questions"></div>
    <button onclick="calculateCompatibility()">Calculate Compatibility</button>
    <div id="results"></div>
    <div class="error" id="error"></div>
</div>
<script>
    const questions = [
        "I enjoy spending time with this person.",
        "I trust this person.",
        "I feel comfortable sharing personal information with this person.",
        "I feel understood by this person.",
        "I feel supported by this person."
    ];

    let answersFriend1 = [];
    let answersFriend2 = [];

    function renderQuestions() {
        const questionsDiv = document.getElementById('questions');
        questionsDiv.innerHTML = '';
        questions.forEach((question, index) => {
            questionsDiv.innerHTML += `
                <p>${question}</p>
                <input type="number" min="1" max="5" id="friend1-answer${index + 1}" required>
                <input type="number" min="1" max="5" id="friend2-answer${index + 1}" required>
            `;
        });
    }
    function calculateCompatibilityScore() {
    let totalFriend1 = answersFriend1.reduce((acc, val) => acc + val, 0);
    let totalFriend2 = answersFriend2.reduce((acc, val) => acc + val, 0);

    // If one person has a 5 for all questions and the other has a 1 for all questions, return 0%
    if (totalFriend1 === questions.length * 5 && totalFriend2 === questions.length) {
        return 0;
    } else if (totalFriend1 === questions.length && totalFriend2 === questions.length * 5) {
        return 0;
    }

    const average = ((totalFriend1 + totalFriend2) / (questions.length * 5 * 2)) * 100;

    return average;
}


    function calculateCompatibility() {
        answersFriend1 = [];
        answersFriend2 = [];
        const errorDiv = document.getElementById('error');
        errorDiv.innerHTML = '';

        for (let i = 0; i < questions.length; i++) {
            const answerFriend1 = document.getElementById(`friend1-answer${i + 1}`).value;
            const answerFriend2 = document.getElementById(`friend2-answer${i + 1}`).value;
            if (!answerFriend1 || !answerFriend2) {
                errorDiv.textContent = "Please answer all questions for both friends.";
                return;
            }
            answersFriend1.push(parseInt(answerFriend1));
            answersFriend2.push(parseInt(answerFriend2));
        }

        const compatibilityScore = calculateCompatibilityScore();
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = `
            <h2>Results</h2>
            <p>Compatibility Score: ${compatibilityScore.toFixed(2)}%</p>
            <p>${getClosingRemark(compatibilityScore)}</p>
        `;
    }

    function calculateCompatibilityScore() {
        let totalFriend1 = answersFriend1.reduce((acc, val) => acc + val, 0);
        let totalFriend2 = answersFriend2.reduce((acc, val) => acc + val, 0);

        const average = ((totalFriend1 + totalFriend2) / (questions.length * 5 * 2)) * 100;

        return average;
    }

    function getClosingRemark(compatibilityScore) {
        if (compatibilityScore >= 80) {
            return "You are incredibly compatible!";
        } else if (compatibilityScore >= 60) {
            return "You are moderately compatible.";
        } else {
            return "You might not be the best match.";
        }
    }

    renderQuestions();
</script>
</body>
</html>
